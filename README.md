# PTT Chat Generator

ðŸŽ‰ News: æˆ‘å€‘æŽ¡ç”¨äº†é¡žä¼¼çš„è³‡æ–™æŽ¡é›†ç­–ç•¥è¨“ç·´äº†ä¸€å€‹ç¹é«”ä¸­æ–‡çš„å¤§åž‹èªžè¨€æ¨¡åž‹ï¼Œæ¨¡åž‹æ•ˆèƒ½èˆ‡ä½¿ç”¨æ–¹å¼å¯ä»¥åƒè€ƒ [Kyara](https://github.com/zake7749/Kyara)

æœ¬å°ˆæ¡ˆçš„ç›®çš„åœ¨å¯¦ä½œä¸€å€‹æŽ¨æ–‡ç”¢ç”Ÿå™¨ï¼Œç”±ä½¿ç”¨è€…è¼¸å…¥ä¸€å€‹éš¨æ©Ÿæ¨™é¡Œï¼Œå³èƒ½å›žè¦†ä¸€å€‹æ°ç•¶çš„æŽ¨æ–‡ï¼Œç›®å‰ä»åœ¨é€²è¡Œä¸­ d(`ï½¥âˆ€ï½¥)b

## ç›®å‰æˆæžœ
```
MianBot: æ‚¨å¥½ï¼Œæˆ‘æ˜¯ä½ çš„è€æœ‹å‹çœ å¯¶ï¼Œè®“æˆ‘å€‘ä¾†èŠèŠå…«å¦å§ o_o

User: ç‚ºä»€éº¼æŽåš´è¦ç‚¸ä¸‰éš»è¦
MianBot: ä¸€éš»çµ¦å°ç•¶å®¶ã€ä¸€éš»çµ¦åŠå¼Ÿï¼Œå¦ä¸€éš»çµ¦èª°æˆ‘ä¸èƒ½èªª

User: è˜‡ç¾Žå®ˆå¾—ä½è¡—äº­å—Ž
MianBot: ç›®å‰çš„æˆ°åŠ›ä¾†çœ‹åˆ¥èªªå®ˆè¡—äº­ éƒ½å¯ä»¥ç›´æŽ¥æ»…äº†æ›¹é­

User: èµ·åºŠç¬¬ä¸€ä»¶äº‹è¦åšä»€éº¼ï¼Ÿ
MianBot: å¼µé–‹çœ¼ç› çµ¦ä½ åƒè€ƒ

User: åˆéŸ³åªæ˜¯å€‹è»Ÿé«”å—Ž
MianBot: åˆéŸ³æ˜¯è»Ÿé«” ä½†æ˜¯åˆéŸ³ä¸åªæ˜¯å€‹è»Ÿé«”

User: æœ‰æ²’æœ‰é³³æ¢¨çš„å…«å¦
MianBot: è½èªªæŠŠé³³æ¢¨è·Ÿç­†åˆåœ¨ä¸€èµ·ï¼Œå°±æœƒè®Šé³³æ¢¨ç­†

User: è‚¥å®…è¦æ€Žæ¨£æ‰æœ‰åŠ åˆ†
MianBot: æ¸›è‚¥ å…ˆå¾žè„«é›¢è‚¥å®…é–‹å§‹

User: ç†Šè²“éº»å©†æ˜¯æ€Žéº¼è´è±†è…ä¸‰é‡å¥çš„
MianBot: å°ç•¶å®¶è¡¨ç¤ºï¼šå¼µå¤§äººä½ å¥½ï¼Œæˆ‘åª½é˜¿è²å¸«å‚…ï¼Œæˆ‘çˆ¸æŽæç£

User: obovç¾åœ¨é‚„å¥½å—Ž
MianBot: ä½ å•çš„æ˜¯å‰é¢é‚„æ˜¯å¾Œé¢ï¼Ÿ

User: å¦‚æžœæ™‚é–“èƒ½é‡ä¾†ï¼Œä½ æƒ³åšä»€éº¼
MianBot: çæƒœèº«é‚Šçš„äºº
```
## é¡žåˆ¥èªªæ˜Ž

* [PTT-Crawler](https://github.com/zake7749/PTT-Crawler): ç”¨æ–¼çˆ¬å– PTT é é¢çš„åŽŸå§‹æ–‡ç« 
* `filter.py`: ç”¨æ–¼éŽæ¿¾ PTT-Crawler çˆ¬å–ä¸‹ä¾†çš„æ–‡ç« ï¼Œå¦‚æ¿¾é™¤æŸäº›æ¨™ç±¤æˆ–æŸäº›ä½¿ç”¨è€…çš„æ–‡ç« ï¼Œæˆ–æ˜¯æ¿¾é™¤å…§å®¹é‡è¦†çš„æ–‡ç« ç­‰
* `article.py`: å„²å­˜ PTT æ–‡ç« çš„çµæ§‹ï¼Œæœƒå°‡åˆ†æ®µå¼çš„å›žè¦†åˆä½µèµ·ä¾†
* `corpus.py`: ä¿å­˜ Article çš„çµæ§‹ï¼Œå¯éæ­·æ–‡ç« çš„æ¨™é¡Œã€å…§å®¹
* `match.py`: èª¿ç”¨ä¸åŒçš„ Matcher å¯¦é©—
* `Matcher`: ç”¨æ–¼æ–‡æœ¬ç›¸ä¼¼åº¦çš„æ¯”å°ï¼Œå°‡ä½¿ç”¨è€…çš„è¼¸å…¥èˆ‡ Corpus è£¡æ‰€æœ‰æ¨™é¡Œæ¯”è¼ƒï¼Œå›žå‚³æœ€ç›¸ä¼¼çš„æ¨™é¡Œèˆ‡ç´¢å¼•
  * `FuzzyMatcher`: åŸºæ–¼ Levenshtein Distance æ¯”å°çŸ­èªžç›¸ä¼¼åº¦
  * `VectorMatcher`: åŸºæ–¼ sentence2vec æ¯”å°çŸ­èªžç›¸ä¼¼åº¦ TODO!
  * `KeywordMatcher`: åŸºæ–¼ tf/idf æ¯”å°çŸ­èªžç›¸ä¼¼åº¦
  * `bm25Matcher`: åŸºæ–¼ Okapi BM25 (åŸºæ–¼ snownlp)ï¼Œç›®å‰é»˜èªæŽ¡ç”¨è©²ç®—æ³•
* `ResponsesEvaluate`: å¾žæŽ¨æ–‡ä¸­æŒ‘é¸å‡ºæœ€ä½³æŽ¨æ–‡
  * `Evaluator`: åŸºæ–¼æŽ¨æ–‡çš„è©žé »ä¾†é¸å–æœ€ä½³å›žæ‡‰
  * `ClusteringEvaluator`: åŸºæ–¼èšé¡žä¾†é¸å–æœ€ä½³å›žæ‡‰ TODO !
  
## å¥—ä»¶éœ€æ±‚

* jieba : ä¸­æ–‡éš±æ€§é¦¬å¯å¤«æ¨¡åž‹æ–·è©žå™¨
* gensim : ä½¿ç”¨è©žè¢‹ã€tfidfã€word2vec
* fuzzywuzzy : æ¨¡ç³Šå­—ä¸²æ¯”å°
  * python-Levenshtein : ç”¨æ–¼å„ªåŒ– fuzzywuzzy è¨ˆç®—é€Ÿåº¦çš„å¥—ä»¶åŒ…
* sentence2vec (éžå¿…è¦)

## Data èªªæ˜Ž

* raw: å„²å­˜PTT-Crawlerçˆ¬å–çš„åŽŸå§‹è³‡æ–™
* processed: å„²å­˜å·²ç¶“ç¯©é¸éŽçš„æ–‡ç« ï¼ˆå¦‚æ¿¾é™¤ç‰¹å®šæ¨™ç±¤ã€ä½¿ç”¨è€…ï¼‰
  * reply: å„²å­˜æ–‡ç« å›žæ‡‰ï¼Œæ¯ 1000 ç­†ç‚ºä¸€å€‹æª”æ¡ˆï¼ˆç›®å‰æœªä¸Šå‚³è‡³ Githubï¼‰
* processed_seged: å„²å­˜æ–‡ç« æˆ–å›žæ‡‰çš„æ–·è©žçµæžœ
* stopwords: å„²å­˜å¸¸ç”¨ä¸­æ–‡åœç”¨è©žã€PTT åœç”¨è©žã€è² é¢æ¨™ç±¤
* User_info: åŸºæ–¼ raw çš„ä½¿ç”¨è€…æŽ¨å™“æ–‡ç´€éŒ„
* Titles.txt: å­˜æ”¾ç¯©é¸å¾Œçš„æ–‡ç« æ¨™é¡Œ
* SegTitles.txt: å­˜æ”¾å·²å®Œæˆæ–·è©žçš„ç¯©é¸å¾Œæ–‡ç« æ¨™é¡Œ

## å¯¦é©—ç°¡è¿°

1. ä½¿ç”¨ PTT-Crawler çˆ¬å–æ–‡ç« å¾Œæ”¾ç½®æ–¼ "data/raw/"
2. ä½¿ç”¨ filter.py å¾žåŽŸå§‹è³‡æ–™è£¡æŒ‘é¸å‡ºéœ€è¦çš„è³‡æ–™
 - `ArticleFilter.load_processed_corpus()`: ç”¨æ–¼è¼‰å…¥å…ˆå‰è™•ç†å¥½çš„èªžæ–™(æœƒè¼‰å…¥ data/processed/ ä¸­æ‰€æœ‰æª”æ¡ˆ)
 - `ArticleFilter.process_raw_data()`: å° "data/raw/" ä¸­çš„åŽŸå§‹è³‡æ–™é€²è¡Œè™•ç†(å¦‚åŽ»é™¤ç‰¹å®štagï¼ŒéŽæ¿¾æ•æ„Ÿå›žæ‡‰ç­‰) 
 - `ArticleFilter.print_titles()`: è¼¸å‡ºè™•ç†å¥½çš„æ–‡ç« æ¨™é¡Œ
 - `ArticleFilter.print_response()` : è¼¸å‡ºè™•ç†å¥½çš„æ–‡ç« å›žæ‡‰
 - ç‚ºç¶­æŒæ–‡ç« çµæ§‹çš„ä¸€è‡´æ€§ï¼Œä½¿ç”¨ `print_titles()` å»ºè­°ä¹Ÿå‘¼å« `print_response()`
3. ä½¿ç”¨ match.py æ¸¬è©¦åŒ¹é…çµæžœ
 - å› ç‚ºæ–·è©žæ–‡ä»¶ (SegTitles.txt) æœ‰äº› `matcher` ä¸æœƒç”¨åˆ°ï¼Œæ‰€ä»¥æ›´æ–° Corpus å¾Œè«‹è¨˜å¾—åˆªé™¤å·²æ–·è©žæ–‡ä»¶ä¸¦é‡æ–°æ–·è©ž
 
## æ¸¬è©¦ç”¨è³‡æ–™é›†

* è«‹å‰å¾€[é€™é‚Š](https://drive.google.com/file/d/11JlbmYmuu00TfmfdAfyoGK_E3VMp8Vd_/view)ä¸‹è¼‰ï¼Œè§£å£“ç¸®å¾Œæ”¾ç½®æ–¼ `data` è³‡æ–™å¤¾ä¸‹ï¼Œ
`reply.rar` è§£å£“ç¸®å¾Œçš„å›žè¦†è«‹æ”¾ç½®æ–¼ `data/processed` ä¸­ã€‚

* å¦‚æžœåªæƒ³ç‰¹åˆ¥ä½¿ç”¨æŠ½å–å®Œç•¢çš„å•ç­”é…å°ï¼Œå¯ä»¥å‰å¾€ [PTT ä¸­æ–‡èªžæ–™](https://github.com/zake7749/Gossiping-Chinese-Corpus) äº†è§£é€²ä¸€æ­¥çš„è³‡è¨Š :>
